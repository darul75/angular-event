/** 
* @license angular-event - v0.0.1
* (c) 2013 Julien VALERY https://github.com/darul75/angular-event
* License: MIT 
**/
!function(a){"use strict";a.module("angularEvent",[]).directive("snow",function(a){return{restrict:"AE",link:function(b,c){function d(){h.clearRect(0,0,f,g),h.globalCompositeOperation="lighter";for(var a=0;a<j.length;a++)j[a].fade(),j[a].move(),j[a].draw();m(d)}function e(){this.s={ttl:15e3,xmax:1,ymax:2,rmax:5,rt:1,xdef:960,ydef:540,xdrift:4,ydrift:4,random:!0,blink:!0,yspeed:3*Math.random()+1},this.reset=function(){this.x=this.s.random?f*Math.random():this.s.xdef,this.y=this.s.random?g*Math.random():this.s.ydef,this.r=(this.s.rmax-1)*Math.random()+1,this.dx=Math.random()*this.s.xmax*(Math.random()<.5?-1:1),this.dy=Math.random()*this.s.ymax*(Math.random()<.5?-1:1),this.hl=this.s.ttl/k*(this.r/this.s.rmax),this.rt=Math.random()*this.hl,this.s.rt=Math.random()+1,this.stop=.2*Math.random()+.4,this.s.xdrift*=Math.random()*(Math.random()<.5?-1:1),this.s.ydrift*=Math.random()*(Math.random()<.5?-1:1),this.yspeed=3*Math.random()+1},this.fade=function(){this.rt+=this.s.rt},this.draw=function(){this.s.blink&&(this.rt<=0||this.rt>=this.hl)?this.s.rt=-1*this.s.rt:this.rt>=this.hl&&this.reset();var a=1-this.rt/this.hl;h.beginPath(),h.arc(this.x,this.y,this.r,0,2*Math.PI,!1),h.closePath();var b=this.r*a;i=h.createRadialGradient(this.x,this.y,0,this.x,this.y,0>=b?1:b),i.addColorStop(0,"rgba(249,254,254,"+a+")"),i.addColorStop(this.stop,"rgba(249,254,254,"+.2*a+")"),i.addColorStop(1,"rgba(249,254,254,0)"),h.fillStyle="rgb(249,254,254)",h.fill()},this.move=function(){this.x+=this.rt/this.hl*this.dx,this.y+=this.yspeed,(this.x>f||this.x<0)&&(this.dx*=-1),(this.y>g||this.y<0)&&(this.y=0)}}var f,g,h,i,j=[],k=50,l=100,m=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=document.createElement("canvas"),o=c.wrap("<div style='position: relative;'></div>");o.after(n);var p=function(){f=c[0].offsetWidth,g=c[0].offsetHeight,n.setAttribute("width",f),n.setAttribute("height",g)};n.setAttribute("style","position: absolute; top:0px; left:0px"),p(),a.addEventListener("resize",function(){p()}),h=n.getContext("2d");for(var q=0;l>q;q++)j[q]=new e,j[q].reset();m(d)}}})}(angular);